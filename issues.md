<!-- BEGIN WRAPPED MARKDOWN -->

# üöÄ NSSM + Git + psexec: –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å "dubious ownership" –∏ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–æ–º —Å–µ—Ä–≤–∏—Å–∞

## üìå –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ NSSM –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–∏—Å–∞ **Git –≤—ã–¥–∞–≤–∞–ª –æ—à–∏–±–∫—É**:

```
fatal: detected dubious ownership in repository at 'D:/projects/pricer-back-ts'
```

**–ü—Ä–∏—á–∏–Ω–∞**: NSSM –∑–∞–ø—É—Å–∫–∞–ª —Å–µ—Ä–≤–∏—Å **–æ—Ç –∏–º–µ–Ω–∏ `NT AUTHORITY\SYSTEM`**, –∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é `xboxd`.  
Git –±–ª–æ–∫–∏—Ä–æ–≤–∞–ª `git pull`, —Ç–∞–∫ –∫–∞–∫ —Å—á–∏—Ç–∞–ª —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π "—Å–æ–º–Ω–∏—Ç–µ–ª—å–Ω—ã–º" (**dubious ownership**).  

### üîç **–ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è?**

### **1Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∏–ª–∏ –≤–ª–∞–¥–µ–ª—å—Ü–∞ –ø–∞–ø–∫–∏ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è NSSM**

```shell
icacls D:\projects\pricer-back-ts
sc qc pricer-back
tasklist | findstr node
```

- –£–±–µ–¥–∏–ª–∏—Å—å, —á—Ç–æ **—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç `xboxd`**, –∞ **NSSM —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç `SYSTEM`**.

---

### **2Ô∏è‚É£ –î–æ–±–∞–≤–∏–ª–∏ `safe.directory`, –Ω–æ —ç—Ç–æ –Ω–µ –ø–æ–º–æ–≥–ª–æ**

```shell
git config --global --add safe.directory D:/projects/pricer-back-ts
```

üìå **Git –≤—Å—ë —Ä–∞–≤–Ω–æ –≤—ã–¥–∞–≤–∞–ª –æ—à–∏–±–∫—É**, –ø–æ—Ç–æ–º—É —á—Ç–æ `git pull` –≤—ã–ø–æ–ª–Ω—è–ª—Å—è –æ—Ç `SYSTEM`, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **—Å–≤–æ–π –≥–ª–æ–±–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥**.

---

### **3Ô∏è‚É£ –î–æ–±–∞–≤–∏–ª–∏ `safe.directory` –≤ –∫–æ–Ω—Ñ–∏–≥ `SYSTEM` —á–µ—Ä–µ–∑ psexec**

```shell
psexec -s -i cmd
```

- –≠—Ç–æ –æ—Ç–∫—Ä—ã–ª–æ **cmd –æ—Ç –∏–º–µ–Ω–∏ `SYSTEM`**, –∏ –≤–Ω—É—Ç—Ä–∏ –Ω–µ–≥–æ –≤—ã–ø–æ–ª–Ω–∏–ª–∏:

```shell
git config --global --add safe.directory D:/projects/pricer-back-ts
git config --global --get-all safe.directory
```

üìå –¢–µ–ø–µ—Ä—å –ø—É—Ç—å –ø–æ—è–≤–∏–ª—Å—è **–≤ –∫–æ–Ω—Ñ–∏–≥–µ `SYSTEM`**, –∏ Git –ø–µ—Ä–µ—Å—Ç–∞–ª –≤—ã–¥–∞–≤–∞—Ç—å –æ—à–∏–±–∫—É **dubious ownership**.

---

### **4Ô∏è‚É£ –ò–∑–º–µ–Ω–∏–ª–∏ –≤–ª–∞–¥–µ–ª—å—Ü–∞ –ø–∞–ø–∫–∏ –Ω–∞ `SYSTEM` (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ)**

```shell
takeown /F D:\projects\pricer-back-ts /R /D Y
icacls D:\projects\pricer-back-ts /grant "NT AUTHORITY\SYSTEM":F /T
```

üìå **–¢–µ–ø–µ—Ä—å `SYSTEM` –≤–ª–∞–¥–µ–µ—Ç –ø–∞–ø–∫–æ–π**, –∏ Git –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –±–µ–∑ –ø—Ä–æ–±–ª–µ–º.

---

### **5Ô∏è‚É£ –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏–ª–∏ —Å–µ—Ä–≤–∏—Å NSSM**

```shell
C:\nssm\nssm.exe restart pricer-back
```

---

## üî• **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞: –°–ª—É–∂–±–∞ –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è –∏ –Ω–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è**

–ü–æ—Å–ª–µ —Ñ–∏–∫—Å–∞ **Git-–∞** NSSM-—Å–µ—Ä–≤–∏—Å **–ø–∞–¥–∞–ª –∏ –Ω–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–ª—Å—è**.

### **1Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∏–ª–∏ —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞**

```shell
nssm status pricer-back
nssm get pricer-back exit
```

üìå –ö–æ–¥ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è **‚â† 0**, –∑–Ω–∞—á–∏—Ç, –ø—Ä–æ—Ü–µ—Å—Å –ø–∞–¥–∞–µ—Ç.

---

### **2Ô∏è‚É£ –í–∫–ª—é—á–∏–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –≤ NSSM**

```shell
nssm edit pricer-back
```

- **–í–∫–ª–∞–¥–∫–∞ `Exit actions`**:
  - ‚úÖ `Restart service` –ø—Ä–∏ –æ—à–∏–±–∫–µ.
  - ‚úÖ `Throttle restart delay` ‚Üí `5000 –º—Å`.

üìå –¢–µ–ø–µ—Ä—å NSSM **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–µ—Ä–≤–∏—Å –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏**.

---

### **3Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∏–ª–∏ –ª–æ–≥–∏ —Å–µ—Ä–≤–∏—Å–∞**

```shell
type D:\projects\pricer-back-ts\logs\stderr.log
```

üìå **–û—à–∏–±–æ–∫ `EADDRINUSE` –Ω–µ –±—ã–ª–æ**, –∑–Ω–∞—á–∏—Ç, –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ –≤ –∑–∞–Ω—è—Ç–æ–º –ø–æ—Ä—Ç–µ.

---

### **4Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∏–ª–∏, –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ª–∏ —Å–µ—Ä–≤–µ—Ä –≤—Ä—É—á–Ω—É—é**

```shell
node D:\projects\pricer-back-ts\dist\server.js
```

üìå **–ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –ø–∞–¥–∞–µ—Ç –≤—Ä—É—á–Ω—É—é**, –∑–Ω–∞—á–∏—Ç, –ø—Ä–æ–±–ª–µ–º–∞ –≤ –∫–æ–¥–µ, –∞ –Ω–µ –≤ NSSM.

---

## üèÜ **–ò—Ç–æ–≥ —Ä–∞–±–æ—Ç—ã**

‚úî –û—à–∏–±–∫–∞ **dubious ownership** —É—Å—Ç—Ä–∞–Ω–µ–Ω–∞.  
‚úî NSSM —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç `git pull`.  
‚úî –í–∫–ª—é—á—ë–Ω **–∞–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞** –≤ —Å–ª—É—á–∞–µ –∫—Ä–∞—à–∞.  
‚úî –î–µ–ø–ª–æ–π –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞—é—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ.  

<!-- END WRAPPED MARKDOWN -->
